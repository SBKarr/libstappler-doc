Title: SPIOBuffer.h


# STAPPLER_CORE_IO_SPIOBUFFER_H_

## BRIEF

Заголовок структуры буфера единого интерфейса ввода-вывода

## CONTENT

Заголовок структуры буфера единого интерфейса ввода-вывода


# ::stappler::io::Buffer

## BRIEF

Структура-обёртка для сущности ввода-вывода, исполняющей роль буфера

## CONTENT

Структура-обёртка для сущности ввода-вывода, исполняющей роль буфера. Представляет из себя набор функций, реализующих функциональность буфера, и указатель на исходный объект. Не владеет объектом, следите за его временем жизни самостоятельно.

Структура использует двухфазную систему записи. Перед записью вызывается функция `prepare`, подготавливающая буфер для записи определённого количества байт и возвращающая указатель на блок для записи. После записи вызывается функция `save`, сохраняющая изменения в буфере (как правило, смещающая указатель на следующий доступный участок памяти).

# ::stappler::io::Buffer::Buffer<typename,typename>(T&)

## BRIEF

Конструктор новой обёртки буфера

## CONTENT

Конструктор новой обёртки буфера

Параметры шаблона:
* typename T - основной класс буфера, для которого создаётся обёртка
* typename Traits - вспомогательный класс, описывающий черты буфера и выводящий необходимые функции

Параметры:
* T& - ссылка на основной буфер


# ::stappler::io::Buffer::prepare(size_t&) const

## BRIEF

Подготавливает буфер для записи нового сегмента

## CONTENT

Подготавливает буфер для записи нового сегмента.

Параметры:
* size_t& - размер запрашиваемого блока. На выходе содержит реальное количество байт в блоке для записи. Реальный размер всегда больше или равен запрошенному.

Возвращает:
* uint8_t* - указатель на блок памяти, в который можно записывать данные

# ::stappler::io::Buffer::save(uint8_t*,size_t,size_t) const

## BRIEF

Сохраняет данные из блока памяти в буфер

## CONTENT

Сохраняет данные из блока памяти в буфер, делая его доступным для следующей операции. Для простого буфера, увеличивает указатель на свободную память на число записанных байтов. Для более сложных буферов возможно иное поведение, вплоть до перемещения записанных данных из временного буфера.

Параметры:
* uint8_t* - указатель на блок памяти, ранее полученный с помощью `prepare`
* size_t - реальный размер блока памяти, полученного с помощью `prepare`
* size_t - число записанных в блок байт


# ::stappler::io::Buffer::capacity() const

## BRIEF

Возвраает общий доступный объём буфера

## CONTENT

Возвращает:
* size_t - общий достпный объём буфера

# ::stappler::io::Buffer::size() const

## BRIEF

Возвращает объём записанных в буфер данных

## CONTENT

Возвращает:
* size_t - объём записанных в буфер данных

# ::stappler::io::Buffer::data() const

## BRIEF

Возвращает указатель на внутреннее хранилище буфера, если доступно

## CONTENT

Возвращает:
* uint8_t* - указатель на внутреннее хранилище буфера, если доступно

# ::stappler::io::Buffer::clear() const

## BRIEF

Полностью очищает буфер

## CONTENT

Полностью очищает буфер, сохраняя его общую вместимость, но удаляя записанные данные. В случае буферов на основе контейнеров STL сохранение вместимости не гарантируется.

# ::stappler::io::Buffer::ptr

## BRIEF

Указатель на реальный объект буфера

## CONTENT

Указатель на реальный объект буфера

Тип: void*


# ::stappler::io::Buffer::prepare_ptr

## BRIEF

Указатель на функцию подготовки буфера

## CONTENT

Указатель на функцию подготовки буфера

Тип: stappler::io::prepare_fn


# ::stappler::io::Buffer::save_ptr

## BRIEF

Указатель на функцию сохранения данных

## CONTENT

Указатель на функцию сохранения данных

Тип: stappler::io::save_fn


# ::stappler::io::Buffer::size_ptr

## BRIEF

Указатель на функцию выяснения размера

## CONTENT

Указатель на функцию выяснения размера

Тип: stappler::io::size_fn


# ::stappler::io::Buffer::capacity_ptr

## BRIEF

Указатель на функцию выяснения вместимости буфера

## CONTENT

Указатель на функцию выяснения вместимости буфера

Тип: stappler::io::size_fn


# ::stappler::io::Buffer::data_ptr

## BRIEF

Указатель на функцию получения указателя на внутреннее хранилище

## CONTENT

Указатель на функцию получения указателя на внутреннее хранилище

Тип: stappler::io::data_fn


# ::stappler::io::Buffer::clear_ptr

## BRIEF

Указатель на функцию очистки буфера

## CONTENT

Указатель на функцию очистки буфера

Тип: stappler::io::clear_fn
